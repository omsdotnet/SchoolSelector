<!DOCTYPE html>
<html>
<head>

	<title>Школы города Омска</title>
	<meta charset="utf-8" />
	<meta name = "viewport" content = "width=device-width, maximum-scale = 1, minimum-scale=1" />
	<link rel="stylesheet" type="text/css" href="css/default.css" media="all" />
	<link rel="stylesheet" href="css/flexslider.css" type="text/css" />
	<link rel="stylesheet" href="css/fixed-navigation.css" type="text/css" />
	<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css' />
	
    <script src="js/groups.js" type="text/javascript"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="js/jquery.flexslider.js"></script>
	<script src="js/default.js"></script>
    <script src="http://api-maps.yandex.ru/2.0/?load=package.full&lang=ru-RU" type="text/javascript"></script>

    <script src="cfg/_settings.js"></script>
    <script src="data/mapdata1.js"></script>


	<script type="text/javascript">
      var myMap;
      var isZoom = false;


	  function initialize() {
	      ymaps.ready(initMap);
	  }

	  function getData(attitude, lattitude) {

	      var script = document.createElement('script');
	      script.type = 'text/javascript';
	      script.src = baseServiceUrl + '?la=' + attitude + '&lg=' + lattitude;
	      document.getElementsByTagName('head')[0].appendChild(script);

	  }

	  function zoomChanger(e) {
	      if (isZoom) {
	          myMap.behaviors.disable(['scrollZoom']);
	          isZoom = false;
	      } else {
	          myMap.behaviors.enable(['scrollZoom']);
	          isZoom = true;
	      }
	  }

	  function initMap() {
	      myMap = new ymaps.Map('map', {
	          center: [54.977271, 73.38665],
	          zoom: 11,
	          type: 'yandex#hybrid',
	          behaviors: ['default']
	      });

	      myMap.events.add('click', zoomChanger);
	      myMap.events.add('dblclick', zoomChanger);
	      myMap.events.add('contextmenu', zoomChanger);

	      myMap.controls
                  // Кнопка изменения масштаба.
                  .add('zoomControl', { left: 5, top: 5 })
                  // Список типов карты
                  .add('typeSelector')
                  // Стандартный набор кнопок
                  .add('mapTools', { left: 35, top: 5 });

	      var myCollection = loadDataMap();
          
	      myCollection.each(function (obj) {
	          obj.events.add('click', function (e) {
	              var coords = e.get('coordPosition');

	              getData(coords[0].toPrecision(6), coords[1].toPrecision(6));
	          });

	      });

	      myMap.geoObjects.add(myCollection);

	  }

	  function callbackSchoolData() {
	      $("#resultAddress").html(textHtml);
	  }


	  function AddressFindClick() {

	      var text = $("#addressText").val();


	      var script = document.createElement('script');
	      script.type = 'text/javascript';
	      script.src = addresServiceUrl + '?addr=' + encodeURIComponent(text);
	      script.async = true;

	      if (script.readyState) {  //IE
	          script.onreadystatechange = function () {
	              if (script.readyState == "loaded" ||
                          script.readyState == "complete") {
	                  script.onreadystatechange = null;
	                  callbackSchoolData();
	              }
	          };
	      } else {  //Others
	          script.onload = function () {
	              callbackSchoolData();
	          };
	      }

	      document.getElementsByTagName('head')[0].appendChild(script);
	  }



	</script>
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<script src="js/respond.min.js"></script>
	<![endif]-->
</head>
<body onload="initialize()">
	<div id="pagewidth">
		<header id="header">
			<div class="center">
				<nav id="mainNav">
					<ul>
						<li class="active"><a href="#mapSection"><span>Карта</span></a></li>
						<li><a href="#addressSection"><span>Адрес</span></a></li>
						<li><a href="#schoolSection"><span>Школа</span></a></li>
						<li><a href="#contactUs"><span>О проекте</span></a></li>
					</ul>
				</nav>
			</div>
		</header>
		<div id="content">
			
            <section id="mapSection" class="row grey">
				<div class="center">
					<div id="map" style="height:750px">

					</div>
				</div>
			</section>


            <section class="row">
                <div class="center">
                    <script type="text/javascript"><!--
                        google_ad_client = "ca-pub-5444837590420556";
                        /* 1 */
                        google_ad_slot = "3276112693";
                        google_ad_width = 970;
                        google_ad_height = 90;
                        //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
            </section>



			<section id="addressSection" class="row grey">
				<div class="center">
                    <div class="formRow">
    					<strong class="subHeading">Выбор ближайших школ по адресу</strong>
                    </div>

                    <div class="formRow">
                        <div class="textField"><input id="addressText" type="text" placeholder="Укажите адрес..." /></div>
                    </div>

   					<div class="formRow">
                        <button class="btnSmall btn submit right" onclick="AddressFindClick();">
    					    <span>Найти</span>
					    </button>
                    </div>

   					<div class="formRow">

    	        		<div id="resultAddress" class="center"></div>

                        <script language="JavaScript" type="text/javascript">

                            var defaultAddress = "Ленина 1";
                            $("#addressText").val(defaultAddress);

                            AddressFindClick();

                        </script>

                    </div>
	
				</div>

			</section>

            <section class="row">
                <div class="center">
                    <script type="text/javascript"><!--
                        google_ad_client = "ca-pub-5444837590420556";
                        /* 1 */
                        google_ad_slot = "3276112693";
                        google_ad_width = 970;
                        google_ad_height = 90;
                        //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
            </section>



			<section id="schoolSection" class="row grey">
				<div class="center">
                    <div class="formRow">
    					<strong class="subHeading">Выбор ближайших школ рядом с заданной</strong>
                    </div>

                    <div class="formRow">
                        <div class="textField"><input type="text" placeholder="Выберите школу ..." /></div>
                    </div>

   					<div class="formRow">
                        <button class="btnSmall btn submit right">
    					    <span>Найти</span>
					    </button>
                    </div>

				</div>

			</section>


            <section class="row">
                <div class="center">
                    <script type="text/javascript"><!--
                        google_ad_client = "ca-pub-5444837590420556";
                        /* 1 */
                        google_ad_slot = "3276112693";
                        google_ad_width = 970;
                        google_ad_height = 90;
                        //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
            </section>



			<section id="contactUs" class="row grey">
				<div class="center">
					<h1>О проекте</h1>
					<strong class="subHeading">Рейтинг района, формируется на основе среднего рейтинга всех школ, входящих в него. 
                                               Рейтинг школы определяется по результатам ЕГЭ ее выпускников, поступивших в ВУЗы. 
                                               Вся информация берется из открытых источников.
					</strong>

					<div class="columns">
						<div class="center">
							<p></p>
						</div>
					</div>
				</div>

			</section>


		</div>

		<footer id="footer">
			<div class="center">
				<span class="copy">Created by BCWD© 2013</span>
			</div>
		</footer>
	</div>



</body>
</html>